<html>
<head>
<title>How to simulate phishing attacks with the HTTP Request Logger | Pentest-Tools.com</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何用HTTP请求记录器模拟网络钓鱼攻击| Pentest-Tools.com</h1>
<blockquote>原文：<a href="https://pentest-tools.com/blog/how-to-simulate-phishing-attacks-with-http-request-logger#2022-07-07T11:10:53.000Z">https://pentest-tools.com/blog/how-to-simulate-phishing-attacks-with-http-request-logger#2022-07-07T11:10:53.000Z</a></blockquote><div><div class="prose prose-headings:break-words prose-img:rounded-md prose-img:ring-1 prose-img:ring-dark-blue-200 prose-img:ring-opacity-30 prose-code:break-words prose-headings:[scroll-margin-top:120px] xl:prose-lg xl:prose-headings:w-[628px] xl:prose-p:w-[628px]">
            
              
                
                  <p>作为一名渗透测试人员或红队安全顾问，当您希望<strong>使用社会工程技术模拟网络钓鱼攻击</strong>时，您可能会面临许多挑战。</p><p>从引诱受害者点击链接或打开Word文档，到监控谁点击了网络钓鱼链接、时间和次数，有大量的策略和细节需要考虑。</p><p>因为我们团队的目标是通过提供合适的工具来简化您的工作，所以我们编写了一份您可以立即使用的实践指南！</p><p>请继续关注我们，探索这些<strong>实际场景</strong>，在这些场景中，<strong>可以使用<a rel="noopener noreferrer" href="https://pentest-tools.com/exploit-helpers/http-request-logger"> HTTP请求记录工具</a></strong><strong/><strong>更快</strong>更有效地部署网络钓鱼活动。</p><p>让我们开始吃吧！</p><h2 id="what-is-the-http-request-logger"><strong>什么是HTTP请求记录器？</strong></h2><p><a rel="noopener noreferrer" href="https://pentest-tools.com/exploit-helpers/http-request-logger"> HTTP请求记录器</a>是一个工具，可以让你轻松地创建唯一的HTTP端点(处理程序)，它可以<strong>记录收到的所有请求</strong>，包括源IP、用户代理、URL参数、时间戳等。</p><p>爱马仕</p><div class="content-highlight"><pre class="code-block"><code>https://pentest-tools.com/logger/&lt;10_chars_random_string&gt;/&lt;optional_parameters&gt;</code></pre></div><p>“10个字符的随机字符串”属性使得HTTP处理程序是独一无二的，这意味着<strong>没有其他Pentest-Tools.com用户可以访问它</strong>(除非他们知道确切的URL)。此外，可选参数是网络钓鱼活动中URL的重要组成部分。</p><p>您可以使用相同的HTTP处理程序根URL非常容易地为每个受害者定制特定的URL。</p><p>例如，假设有三个目标:约翰·斯诺、艾莉亚·史塔克和詹姆·兰尼斯特。您可以为这三个目标中的每一个目标向HTTP处理程序添加一个自定义参数。通过这种方式，您将获得三个<strong>不同且有效的网络钓鱼网址</strong>，它们会告诉您受害者点击链接的时间和次数。</p><p>URL可能如下所示:</p><div class="content-highlight"><pre class="code-block"><code>https://pentest-tools.com/logger/&lt;10_chars_random_string&gt;/victim=John_Snow
https://pentest-tools.com/logger/&lt;10_chars_random_string&gt;/victim=Arya_Stark
https://pentest-tools.com/logger/&lt;10_chars_random_string&gt;/victim=Jaime_Lannister</code></pre></div><p>HTTP处理程序的<strong>生命周期为60天</strong>，剩余时间到期后，它将不再记录收到的请求。</p><h3 id="how-to-generate-the-http-logger"><strong>如何生成HTTP记录器</strong></h3><p>在深入一些实际例子之前，下面是如何创建HTTP处理程序的<strong>:</strong></p><p>登录你的Pentest-Tools.com账户后，进入<strong>工具- &gt;漏洞助手&amp;工具- &gt; HTTP请求记录器</strong>并将其<strong>标签</strong>设置为所需值。</p><p>新创建的处理程序将如下所示:</p><p><img src="../Images/31e4ba397caac3bbe9d77e4b542175a9.png" alt="http request logger results displayed" loading="lazy" data-original-src="https://pentest-tools.com/blog/img/asset/YXNzZXRzL2NvbnRlbnQvaG93LXRvLXNpbXVsYXRlLXBoaXNoaW5nLWF0dGFja3Mtd2l0aC1odHRwLXJlcXVlc3QtbG9nZ2VyLzJfaHR0cF9yZXF1ZXN0X2xvZ2dlcl9yZXN1bHRzLmpwZWc=?s=72edc352295a55c4d34b70463814f6dc"/></p><h2 id="scenario-1-how-to-check-who-clicked-on-a-phishing-link"><strong>场景# 1–如何检查谁点击了网络钓鱼链接</strong></h2><p>您可以使用<a rel="noopener noreferrer" href="https://pentest-tools.com/exploit-helpers/http-request-logger"> HTTP请求记录器</a>来模拟网络钓鱼攻击。</p><p>为了展示它是如何工作的，让我们使用三个著名的目标:艾莉亚·史塔克、约翰·斯诺和杰米·兰尼斯特。</p><p>在这个演示中，我们使用<a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.mailinator.com/">mailinator.com</a>为他们创建了一次性电子邮件地址。我们还利用<a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.guerrillamail.com/">guerrillamail.com</a>为“IT人”创建了一个虚假的电子邮件地址，该地址会试图说服受害者点击钓鱼链接。</p><p>让我们假设艾莉亚收到了以下邮件:</p><p><img src="../Images/77435cd7f1859e3e49b7b56d84219a51.png" alt="a phishing link received by the victim Arya " loading="lazy" data-original-src="https://pentest-tools.com/blog/img/asset/YXNzZXRzL2NvbnRlbnQvaG93LXRvLXNpbXVsYXRlLXBoaXNoaW5nLWF0dGFja3Mtd2l0aC1odHRwLXJlcXVlc3QtbG9nZ2VyLzVfYXJ5YS5qcGVn?s=5b1167f56acac24874b0a8584c192aaf"/></p><p>注意，我们为艾莉亚·史塔克创建了一个定制参数(<strong> password_reset=arya </strong>)。这样，我们就可以准确地统计出<strong>她点击了</strong>多少次链接，从哪个<strong> IP地址</strong>，使用了什么<strong>操作系统</strong>(基于受害者浏览器设置的用户代理)。</p><p><img src="../Images/991e6e8976ef794d0660978f27ce6d69.png" alt="custom parameter for Arya Stark" loading="lazy" data-original-src="https://pentest-tools.com/blog/img/asset/YXNzZXRzL2NvbnRlbnQvaG93LXRvLXNpbXVsYXRlLXBoaXNoaW5nLWF0dGFja3Mtd2l0aC1odHRwLXJlcXVlc3QtbG9nZ2VyLzVfYXJ5YV9jaGFuZ2VkLWlwLmpwZWc=?s=5fd0bcf384c26350847bafc491049b4d"/></p><p><img src="../Images/f36a60c39c6cf2b8f13333bb2e87018e.png" alt="custom parameter created for the victim" loading="lazy" data-original-src="https://pentest-tools.com/blog/img/asset/YXNzZXRzL2NvbnRlbnQvaG93LXRvLXNpbXVsYXRlLXBoaXNoaW5nLWF0dGFja3Mtd2l0aC1odHRwLXJlcXVlc3QtbG9nZ2VyLzVfYXJ5YV9jaGFuZ2VkLWlwcy5qcGVn?s=beddb47684255a80e4460d0e7f4c3df3"/></p><p>此外，我们可以<strong>检查HTTP头</strong>请求包括:</p><p><img src="../Images/dc8bc1ddf3065ebcdaed4359e5ea9edb.png" alt="checking the HTTP Headers" loading="lazy" data-original-src="https://pentest-tools.com/blog/img/asset/YXNzZXRzL2NvbnRlbnQvaG93LXRvLXNpbXVsYXRlLXBoaXNoaW5nLWF0dGFja3Mtd2l0aC1odHRwLXJlcXVlc3QtbG9nZ2VyLzVfYXJ5YV9oZWFkZXJfYmx1ci5qcGVn?s=94e1ebfd17555b0a985f548ac61d6254"/></p><p>按照同样的模式，我们模拟出约翰·斯诺和杰米·兰尼斯特也是这次网络钓鱼攻击的受害者。</p><p>您还可以通过其他更分散的方式嵌入钓鱼链接！您可以使用图像、跟踪像素等等，但是这些技术将在另一篇文章中讨论。</p><p>我们的工具会持续监控目标是否被说服、被说服了多少次以及何时被说服。无论何时你考虑，你可以<strong>导出这些结果在<a href="https://pentest-tools.com/usage/pentest-reporting-tool">一个PDF报告文件</a> </strong>。</p><p><img src="../Images/7b5da7b3113919868e2b4e6745b37544.png" alt="http request logger report" loading="lazy" data-original-src="https://pentest-tools.com/blog/img/asset/YXNzZXRzL2NvbnRlbnQvaG93LXRvLXNpbXVsYXRlLXBoaXNoaW5nLWF0dGFja3Mtd2l0aC1odHRwLXJlcXVlc3QtbG9nZ2VyLzZfcmVwb3J0LmpwZWc=?s=88eb82aa809245d0eb7b9c55296ab801"/></p><h2 id="scenario-2-advanced-phishing-attack-using-word-documents"><strong>场景# 2–使用Word文档的高级网络钓鱼攻击</strong></h2><p>在这个场景中，我们计算了有多少受害者试图打开发送到他们电子邮件地址的Word文档。我们没有在文档中放置任何宏，我们只嵌入了一个从外部URL(我们的HTTP处理程序)加载的图片对象。</p><p>每次用户打开文档时，Microsoft Office都会向我们的处理程序发出HTTP请求来加载图像，从而泄露用户的IP地址和其他详细信息。</p><p>为了制作一个欺骗性的文档，从一个空的docx文件开始，按CTRL+F9嵌入一个外部对象。</p><p>您将看到<code>{ }</code>出现。</p><p>右键单击它，然后转到“编辑字段…”</p><p><img src="../Images/0ec2de1b3849fe3ee8ecd7a6cf73b58b.png" alt="" loading="lazy" data-original-src="https://pentest-tools.com/blog/img/asset/YXNzZXRzL2NvbnRlbnQvaG93LXRvLXNpbXVsYXRlLXBoaXNoaW5nLWF0dGFja3Mtd2l0aC1odHRwLXJlcXVlc3QtbG9nZ2VyLzZfMl9lZGl0X2ZpZWxkLnBuZw==?s=c036b60fd853c05767b1906d770a4164"/></p><p>创建如下所示的请求字段(字段名-&gt; include picture；URL:<a href="https://pentest-tools.com/logger/9YCsYKao1i/open=docx">https://pentest-tools.com/logger/9YCsYKao1i/open=docx</a>，勾选“数据未随文件存储”，点击确定:</p><p><img src="../Images/e76d52439376d36c49c3749ece06afa9.png" alt="" loading="lazy" data-original-src="https://pentest-tools.com/blog/img/asset/YXNzZXRzL2NvbnRlbnQvaG93LXRvLXNpbXVsYXRlLXBoaXNoaW5nLWF0dGFja3Mtd2l0aC1odHRwLXJlcXVlc3QtbG9nZ2VyLzdfZmllbGQuanBlZw==?s=c916291249cbde4af42c7a01daff5499"/></p><p>接下来，将“图像”的大小调整为1×1像素，这样它就看不见了，很容易被受害者发现。保存文档并将其发送给受害者。</p><p>一旦他们打开它，请求就会被执行。您可以立即在仪表盘中查看结果！</p><p><img src="../Images/557bff7f773604398e2150be693787ca.png" alt="" loading="lazy" data-original-src="https://pentest-tools.com/blog/img/asset/YXNzZXRzL2NvbnRlbnQvaG93LXRvLXNpbXVsYXRlLXBoaXNoaW5nLWF0dGFja3Mtd2l0aC1odHRwLXJlcXVlc3QtbG9nZ2VyLzhfZG9jeF9pcF9jaGFuZ2VkLmpwZWc=?s=314d2542aecc566696d88d0214e3c5d6"/></p><p>如果您试图<strong>分析当您嵌入外部图像资源时在幕后</strong>发生了什么，您可以打开。带有7-zip文件的docx文件，并转到file . docx \ word \ _ rels \ document . XML . rels文件。</p><p><img src="../Images/6fccbf61eded12f5c1b09dbf43a720e3.png" alt="" loading="lazy" data-original-src="https://pentest-tools.com/blog/img/asset/YXNzZXRzL2NvbnRlbnQvaG93LXRvLXNpbXVsYXRlLXBoaXNoaW5nLWF0dGFja3Mtd2l0aC1odHRwLXJlcXVlc3QtbG9nZ2VyLzlfeG1sLmpwZWc=?s=94459e1b1dbfab8e5734b1d94f748489"/></p><p>从这里，您可以观察id为<strong> rId4 </strong>的Relationship参数，它包括我们设置为目标的HTTP请求记录器链接。此外，TargetMode参数的值为“External”。</p><p><strong>专业提示</strong>:这种网络钓鱼场景的关键思想是<strong>受害者必须打开收到的Word文档</strong>。<strong>他们不必启用宏或点击任何“确定”按钮</strong>。这表明用户很容易被诱骗点击链接或打开文档，而没有意识到网络钓鱼攻击。</p><p><strong>使用HTTP请求记录器进行更简单、更快速的网络钓鱼测试</strong></p><p>现在，您已经看到了这些实际场景，在这些场景中，您可以使用HTTP请求记录器来使您的工作更加简单和快速，您已经准备好开始了！</p><p>我们构建这个工具是为了简化您的工作流程，无论您是pentester还是安全顾问，它提供了一个定制的HTTP服务器，可以在一个地方记录和显示所有的HTTP请求。</p><p>您可以使用该工具<strong>更好地模拟网络钓鱼攻击</strong>和<strong>执行更快的安全测试。</strong></p><p>如果您觉得这个简短的教程很有用，请不要犹豫，在您未来的渗透测试中使用HTTP请求记录器工具为您的客户创造更好的安全意识！</p><h4><strong>本指南中提到的工具:</strong></h4>

                

                
              
            
          </div>
        </div>    
</body>
</html>