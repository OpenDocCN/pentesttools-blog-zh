<html>
<head>
<title>How to perform authenticated website scans with Pentest-Tools.com | Pentest-Tools.com</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何使用Pentest-Tools.com | Pentest-Tools.com执行认证网站扫描</h1>
<blockquote>原文：<a href="https://pentest-tools.com/blog/authenticated-scanning#2022-08-17T10:01:59.000Z">https://pentest-tools.com/blog/authenticated-scanning#2022-08-17T10:01:59.000Z</a></blockquote><div><div class="prose prose-headings:break-words prose-img:rounded-md prose-img:ring-1 prose-img:ring-dark-blue-200 prose-img:ring-opacity-30 prose-code:break-words prose-headings:[scroll-margin-top:120px] xl:prose-lg xl:prose-headings:w-[628px] xl:prose-p:w-[628px]">
            
              
                
                  <p>本文展示了如何使用<a target="_blank" href="https://pentest-tools.com/website-vulnerability-scanning/website-scanner">网站漏洞扫描器</a>工具扫描需要认证的web应用程序。</p><p>了解如何配置扫描仪的认证选项，使其自动通过登录页面并执行<em>深度扫描</em>。</p><p><strong>注意:</strong>要访问扫描仪的认证选项，您需要首先登录您的Pentest-Tools.com账户<a target="_blank" href="https://pentest-tools.com/login">。</a></p><h2 id="iwhy-authenticated-scans">一.为什么要进行认证扫描？</h2><p>如果未启用身份验证，web scanner只覆盖一小部分应用程序功能，即在用户必须进行身份验证之前公开的功能。但是，可能还有其他未发现的漏洞，这些漏洞只能在登录到应用程序后才能发现。</p><p><a href="https://www.youtube.com/watch?v=C52vwMdTDqA&amp;t" rel="external nofollow noopener noreferrer">执行认证扫描</a>的另一个很好的理由是，它模仿恶意认证用户的活动，这具有额外的攻击媒介。经过身份验证的用户比未经身份验证的用户可以访问更多的功能。</p><h2 id="iisupported-authentication-methods"><strong>二。支持的认证方法</strong></h2><p>我们的<a href="https://pentest-tools.com/website-vulnerability-scanning/website-scanner">网站漏洞扫描器</a>支持四种执行认证扫描的方法:</p><ol start="1"><li><p><a href="/blog/authenticated-scanning/#recorded"> <strong>记录-基于记录的认证</strong> </a></p></li><li><p><a href="/blog/authenticated-scanning/#form"> <strong>自动-基于表单的认证</strong> </a></p></li><li><p><a href="/blog/authenticated-scanning/#cookie"><strong>Cookie——基于Cookie的认证</strong> </a></p></li><li><p><a href="/blog/authenticated-scanning/#headers"> <strong>报头–报头认证</strong> </a></p></li></ol><p>本文的以下部分向您展示了如何配置扫描器，以及如何在进行身份验证扫描时解释结果。</p><p>网站漏洞扫描程序提供两种类型的扫描:轻度扫描和完全扫描。只有<strong>全扫描</strong>支持认证。</p><p>这是扫描仪的web界面，允许您配置身份验证选项:</p><p><img src="../Images/d14fd53501aa08963d5f013c1056e6e9.png" alt="website vulnerability scanner " loading="lazy" data-original-src="https://pentest-tools.com/blog/img/asset/YXNzZXRzL2NvbnRlbnQvYXV0aGVudGljYXRlZC1zY2FubmluZy93ZWJzaXRlX3NjYW5uZXJfLnBuZw==?s=ba1ff21da98e03a9337ff57fdebdf4a4"/></p><p>为了配置全扫描的身份验证，您必须:</p><ol start="1"><li><p>插入您要扫描的网站的URL(目标)</p></li><li><p>Select the Full Scan</p></li><li><p>启用“身份验证”选项</p></li></ol><h3 id="1recording-based-authentication"><strong> 1。基于记录的认证</strong></h3><p>复杂的web应用程序需要加载动态页面和组件的能力。对于能够在特定目标上进行身份验证的自动扫描器，必须满足这些要求。Recorded方法使用Selenium技术在登录用于扫描的帐户时记录用户事件。用户必须上传认证过程的记录，该记录可以按照下面描述的步骤获得。</p><p>要了解启用此身份验证方法所需步骤的更多信息，<a href="https://support.pentest-tools.com/en/scans-tools/recorded-authentication-selenium">请阅读我们的专用支持文章</a>。</p>

                

                
              
                
                  <div x-data="{ showVideo: false }" x-on:close.window.stop="showVideo = false" class="not-prose group relative flex items-center justify-center overflow-hidden rounded-xl">
  
  <p aria-hidden="true" class="pointer-events-none absolute inset-0 rounded-xl bg-gray-800 opacity-40"/>
  <p aria-hidden="true" class="absolute h-28 w-28 overflow-hidden rounded-full bg-white bg-opacity-5 shadow-lg ring-1 ring-white ring-opacity-20 transition duration-300 supports-backdrop-filter:backdrop-blur-sm group-hover:scale-110 group-hover:bg-opacity-10 group-hover:ring-opacity-30 sm:h-32 sm:w-32 lg:h-36 lg:w-36"/>
  <button type="button" aria-haspopup="true" x-bind:aria-expanded="showVideo ? showVideo : undefined" class="group absolute inset-0 flex w-full items-center justify-center rounded-3xl focus:outline-none" x-on:click="showVideo = true">
    <span class="sr-only">Play video</span>
    <svg class="h-24 w-24 rounded-full ring-offset-4 ring-offset-transparent transition-[box-shadow,transform] duration-300 group-hover:scale-105 group-focus:ring-4 group-focus:ring-white group-focus:ring-opacity-30 sm:h-28 sm:w-28 lg:h-32 lg:w-32" aria-hidden="true" viewbox="0 0 24 24" fill="none">
      <path class="text-white transition-[text-opacity] duration-300" fill="currentColor" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
      <path class="text-secondary-accent-500" fill="currentColor" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"/>
    </svg>
  </button>

  
  

  <template x-if="showVideo">
    
















<template x-teleport="body">
  <div x-data="modal" class="fixed inset-0 z-120 overflow-hidden overflow-y-auto" x-on:keydown.escape.window.prevent.stop="close" x-on:close.window="close" x-show="open">
    <div class="flex h-full justify-center items-center px-4 pt-4 pb-16 sm:p-0">
      <p x-show="open" x-transition.opacity="" aria-hidden="true" class="fixed inset-0 bg-gray-500/75 transition-opacity" x-on:click.stop="close"/>

      
      

      <div x-show="open" x-transition:enter="duration-300 ease-out" x-transition:enter-start="translate-y-4 opacity-0 sm:translate-y-0 sm:scale-95" x-transition:enter-end="translate-y-0 opacity-100 sm:scale-100" x-transition:leave="duration-200 ease-in" x-transition:leave-start="translate-y-0 opacity-100 sm:scale-100" x-transition:leave-end="translate-y-4 opacity-0 sm:translate-y-0 sm:scale-95" role="dialog" aria-modal="true" aria-labelledby="modal-headline" class="transform transition-[opacity,transform] sm:my-8 h-auto sm:w-auto" x-trap.noscroll.inert="open" x-on:transitionend.self.debounce="$focus.first()">
        <div class="relative sm:w-screen sm:max-w-xl lg:max-w-3xl xl:max-w-5xl">
        <h2 id="modal-title" class="sr-only">如何使用Pentest-Tools.com执行认证网站扫描</h2>
        
        <p class="aspect-video overflow-hidden rounded-lg">                    </p>
      </div>
      </div>
    </div>
  </div>
</template>


  


  </template>
</div>



                

                
              
                
                  <p/><h3 id="2automatic-form-based-authentication"><strong> 2。自动-基于表单的认证</strong></h3><p>“自动”选项允许用户通过在目标应用程序中拥有一对有效的凭证来进行认证扫描。</p><p>该方法在用户提供的URL中找到登录表单，发送凭证，并截屏响应。<br/>通过选择<strong>自动</strong>选项卡进行配置。</p><p>您必须提供以下详细信息:</p><p>此时，您可以通过按下<code>Check Authentication</code>按钮或直接开始扫描来测试验证是否正常工作。检查身份验证功能不会启动扫描过程，但无论成功与否，它只会从浏览器显示一个屏幕截图。(以1280 x 720px像素裁剪)。</p><p>以下是“自动”选项的配置示例:</p><p><img src="../Images/84f5fe8fbe6e36fb3e1d44bdd0c968fb.png" alt="automatic_method_configuration" loading="lazy" data-original-src="https://pentest-tools.com/blog/img/asset/YXNzZXRzL2NvbnRlbnQvYXV0aGVudGljYXRlZC1zY2FubmluZy8yX2F1dG9tYXRpY19tZXRob2RfY29uZmlndXJhdGlvbi5wbmc=?s=4bd3bbc74ec3cf354eb054a02553fc36"/>这是一个成功登录的屏幕截图示例，显示了目标应用程序的登录页面。</p><p><img src="../Images/710ef22884f892d292b9e0ddd510ae88.png" alt="website scanner authentication_result" loading="lazy" data-original-src="https://pentest-tools.com/blog/img/asset/YXNzZXRzL2NvbnRlbnQvYXV0aGVudGljYXRlZC1zY2FubmluZy80LndlYnNpdGUtc2Nhbm5lci1hdXRoZW50aWNhdGlvbl9yZXN1bHQucG5n?s=86f06870cba46f8d7ac3c7710aa08895"/></p><h3 id="3cookie-based-authentication"><strong> 3。基于Cookie的认证</strong></h3><p><a target="_blank" href="https://en.wikipedia.org/wiki/HTTP_cookie" rel="external nofollow noopener noreferrer">HTTP cookie</a>是网络浏览器从服务器接收的数据片段，通常用于识别用户的网络会话(它们也被称为会话cookie)。收到会话cookie后，浏览器会将它与向该服务器发出的每个HTTP请求一起发送。知道请求与特定用户相关联是很有帮助的。</p><p>我们的<strong>基于cookie的认证</strong>选项模仿已经有会话Cookie的web浏览器的行为。它要求用户在“cookie头”字段中插入有效的会话Cookie。会话cookie必须取自已经建立的web会话(您需要手动登录到您的web应用程序并从浏览器获取cookie)。</p><p>此类身份验证的web界面如下图所示:</p><p><img src="../Images/f538c7ea656fe5fa9cec0c0e47108a5d.png" alt="cookies_setup" loading="lazy" data-original-src="https://pentest-tools.com/blog/img/asset/YXNzZXRzL2NvbnRlbnQvYXV0aGVudGljYXRlZC1zY2FubmluZy80X2Nvb2tpZXNfc2V0dXAucG5n?s=bc0d4c838aac12972bdd530c4e7130f0"/>为了获得需要的饼干，请从<a href="/blog/authenticated-scanning/#sessioncookie"> <strong>这里开始按照</strong> </a>的步骤操作。</p><p>HTTP头支持客户端和服务器之间的通信，携带关于客户端浏览器、服务器、访问的页面等信息。一些应用程序使用特定的头为用户(登录)创建会话。因此，需要扫描这些类型的网站/应用程序(身份验证)的用户需要标头的身份验证方法。</p><p>基于cookie的方法使用cookie，这是一种特殊类型的头，但并不是每个应用程序都使用cookie来验证用户。有些应用程序依赖其他特殊的头作为附加的安全层，例如基于令牌的认证(<a target="_blank" href="https://jwt.io/" rel="external nofollow noopener noreferrer"> <strong> JSON web令牌)</strong> </a></p><p>为了检索所需的标题，请遵循上一节中描述的相同步骤(基于cookie ),并按以下格式插入它们:</p><p>header 1:header 1的值</p><p>header 2:subheader 1 = subheader 1的值；子标题2 =子标题2的值</p><p><img src="../Images/d17f259fe2f77df9af44023de979660f.png" alt="authentication method headers" loading="lazy" data-original-src="https://pentest-tools.com/blog/img/asset/YXNzZXRzL2NvbnRlbnQvYXV0aGVudGljYXRlZC1zY2FubmluZy9hdXRoZXRudGljYXRpb24tbWV0aG9kLWhlYWRlcnMucG5n?s=09dc164335d470bade5fa36f34d1625d"/></p><h2 id="iii-how-to-get-the-session-cookie"><strong>三。如何获取会话cookie？</strong></h2><p>首先，您必须使用web浏览器在目标web应用程序中手动进行身份验证。其次，您需要从浏览器获取会话cookie字符串。</p><p>例如，使用<strong> Google Chrome </strong>，您执行了以下操作:</p><ul><li><p>进入开发者工具–通过菜单&gt;更多工具&gt;开发者工具(或Ctrl + Shift + I)</p></li><li><p>进入“网络”选项卡</p></li><li><p>单击“名称”部分，选择显示附加“Cookies”选项卡的URL。</p></li><li><p>转到“标题”选项卡(针对该URL)</p></li><li><p>滚动到请求标题并查看Cookie标题</p></li><li><p>从Cookie头中复制字符串，并将其插入，如下例所示。<em>aa</em>id = ad4b 654 ad 48 F4 d 545 a 64d 75 ea’(名称=值的列表，用“；”分隔)并且没有空格)</p></li></ul><p>以下是开发人员工具界面:</p><p><img src="../Images/63b0bb2200dd30d04d42726e967688fc.png" alt="developer tools interface" loading="lazy" data-original-src="https://pentest-tools.com/blog/img/asset/YXNzZXRzL2NvbnRlbnQvYXV0aGVudGljYXRlZC1zY2FubmluZy9kZXZlbG9wZXItdG9vbHMtaW50ZXJmYWNlLmpwZWc=?s=7b39ef79b63184d207ec42dfc5ca0f92"/></p><h2 id="iv-interpreting-the-results"><strong>四世。解读结果</strong></h2><p>经过身份验证的扫描比未经身份验证的扫描覆盖更多的应用程序功能和页面。“检查认证”按钮对于前三种方法是<strong>可选的，对于<strong>“Headers”</strong>方法<strong>是禁用的</strong>，因此您可以直接开始扫描。</strong></p><p>如果您在最终扫描报告中获得额外的“身份验证完成”消息，您将知道身份验证成功。此外，蜘蛛结果应该包含比未经验证的扫描更多的抓取的URL。</p><p><strong>认证扫描显示的结果</strong></p><p><img src="../Images/a4bd94bb07813cfe3b353b2066a16a7c.png" alt="scanning-with-authentication" loading="lazy" data-original-src="https://pentest-tools.com/blog/img/asset/YXNzZXRzL2NvbnRlbnQvYXV0aGVudGljYXRlZC1zY2FubmluZy9zY2FubmluZy13aXRoLWF1dGhlbnRpY2F0aW9uLTEucG5n?s=507f861a19277cffc54bf724bca7d9ea"/> <strong>未认证扫描显示的结果</strong></p><p><img src="../Images/5234b8f1cb1796884e11eb8fcc6c0499.png" alt="scanning-without-authentication" loading="lazy" data-original-src="https://pentest-tools.com/blog/img/asset/YXNzZXRzL2NvbnRlbnQvYXV0aGVudGljYXRlZC1zY2FubmluZy9zY2FubmluZy13aXRob3V0LWF1dGhlbnRpY2F0aW9uLnBuZw==?s=b830547d3d895bc3983112577bc295bb"/></p><h2 id="v-behind-the-scenes"><strong>五、幕后</strong></h2><p>web漏洞扫描的主要步骤阶段是爬行和主动扫描。为了以经过身份验证的用户身份执行这些操作，扫描程序需要用户的会话cookie。它将用于每一个请求，它将发现比未经验证的扫描更多的信息。</p><p><strong>登录认证</strong>选项执行一个额外的步骤，以获取会话cookie。首先，扫描程序从提供的URL中检测登录表单，并尝试使用凭据进行身份验证。第二，扫描程序试图从经过身份验证的用户那里获取会话cookie，并从这一点开始在每个请求中使用它。</p><p>如果您只选择了<code>Check authentication</code>选项，用户页面的屏幕截图将帮助您直观地了解身份验证是否成功。蜘蛛搜索未初始化，扫描停止。</p><p>在<strong>基于cookie的认证</strong>中，你已经提供了会话Cookie，蜘蛛搜索和主动扫描直接开始。如果cookie是正确的，扫描将导致发现更多的URL并分析漏洞。</p><p>请注意，扫描仪无法知道提供的cookie是否正确。它将按原样使用它，并且由您来验证扫描是否到达了应用程序的所需部分。</p><h2 id="vi-compatibilities">六。兼容性</h2><p>我们目前还支持在单页应用程序(spa)上执行身份验证测试，因为我们的网站扫描仪已经升级，因此它能够加载、检测和登录给定凭据的用户。该方法可使用基于<a href="/blog/authenticated-scanning/#form"> <strong>形式的认证</strong> </a>方法和基于记录的认证<a href="/blog/authenticated-scanning/#recorded"> <strong>基于记录的认证</strong> </a>。</p><p>随着基于标头的身份验证的实施，我们的网站漏洞扫描器现在可以基于令牌(JWT)为应用程序提供更准确的评估和增强的安全性。</p><p>您可以在我们的支持中心找到关于如何使用JWT执行认证网站扫描的分步指南。</p><p><strong>使用认证扫描测试您的web应用程序以发现隐藏的漏洞</strong></p><p>身份验证扫描在web应用程序中提供了更多的覆盖范围，因为它发现了更多的动态URL。当您执行更深入的扫描时，有更大的机会<a href="https://pentest-tools.com/alltools">找到隐藏良好的漏洞</a>并使您的web应用程序更加安全。</p>

                

                
              
            
          </div>
        </div>    
</body>
</html>